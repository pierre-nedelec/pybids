<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. layout: Querying BIDS datasets &mdash; PyBIDS 0.16.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. analysis: Model specification for BIDS datasets" href="../analysis/index.html" />
    <link rel="prev" title="1. Introduction: What is pybids?" href="../introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PyBIDS
          </a>
              <div class="version">
                0.16.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">1. Introduction: What is pybids?</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. <code class="docutils literal notranslate"><span class="pre">layout</span></code>: Querying BIDS datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loading-bids-datasets">2.1. Loading BIDS datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#querying-datasets">2.2. Querying datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extracting-metadata">2.3. Extracting metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html">3. <code class="docutils literal notranslate"><span class="pre">analysis</span></code>: Model specification for BIDS datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reports/index.html">4. <code class="docutils literal notranslate"><span class="pre">reports</span></code>: Data acquisition report generation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyBIDS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../user_guide.html">User guide</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2. </span><code class="docutils literal notranslate"><span class="pre">layout</span></code>: Querying BIDS datasets</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/layout/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="layout-querying-bids-datasets">
<span id="reports"></span><h1><span class="section-number">2. </span><code class="docutils literal notranslate"><span class="pre">layout</span></code>: Querying BIDS datasets<a class="headerlink" href="#layout-querying-bids-datasets" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<p class="topic-title"><strong>Contents</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#loading-bids-datasets" id="id2">Loading BIDS datasets</a></p></li>
<li><p><a class="reference internal" href="#querying-datasets" id="id3">Querying datasets</a></p></li>
<li><p><a class="reference internal" href="#extracting-metadata" id="id4">Extracting metadata</a></p></li>
</ul>
</nav>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="loading-bids-datasets">
<span id="loading-datasets"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="section-number">2.1. </span>Loading BIDS datasets</a><a class="headerlink" href="#loading-bids-datasets" title="Permalink to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../generated/bids.layout.BIDSLayout.html#bids.layout.BIDSLayout" title="bids.layout.BIDSLayout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bids.layout.BIDSLayout</span></code></a> class requires the path to a valid BIDS dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bids</span> <span class="kn">import</span> <span class="n">BIDSLayout</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bids.tests</span> <span class="kn">import</span> <span class="n">get_test_data_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span> <span class="o">=</span> <span class="n">BIDSLayout</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">get_test_data_path</span><span class="p">(),</span> <span class="s1">&#39;synthetic&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">BIDSLayout</span></code> instance is a lightweight container for all of the files in the
BIDS project directory. It automatically detects any BIDS entities found in the
file paths, and allows us to perform simple but relatively powerful queries over
the file tree. By default, defined BIDS entities include things like “subject”,
“session”, “run”, and “type”.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>To exclude folders from indexing (e.g. only index a subset of subjects to save time),
you can pass a list of folder names, or a regex pattern to the <code class="docutils literal notranslate"><span class="pre">ignore</span></code> argument.
For example, to ignore all subjects except “25”:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">BIDSLayout</span><span class="p">(</span><span class="n">bids_dir</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(sub-(?!25)\d*/)&quot;</span><span class="p">)])</span>
</pre></div>
</div>
</div>
</section>
<section id="querying-datasets">
<span id="id1"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">2.2. </span>Querying datasets</a><a class="headerlink" href="#querying-datasets" title="Permalink to this heading">¶</a></h2>
<p>Pybids layouts can be queried according to a number of parameters, using
grabbit’s <code class="docutils literal notranslate"><span class="pre">get</span></code> functionality.</p>
<p>For example, if we want to get a list of subjects in the dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_subjects</span><span class="p">()</span>
<span class="go">[&#39;01&#39;, &#39;02&#39;, &#39;03&#39;, &#39;04&#39;, &#39;05&#39;]</span>
</pre></div>
</div>
<p>We can also get a list of all available sessions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_sessions</span><span class="p">()</span>
<span class="go">[&#39;01&#39;, &#39;02&#39;]</span>
</pre></div>
</div>
<p>Or a list of tasks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_tasks</span><span class="p">()</span>
<span class="go">[&#39;nback&#39;, &#39;rest&#39;]</span>
</pre></div>
</div>
</section>
<section id="extracting-metadata">
<h2><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">2.3. </span>Extracting metadata</a><a class="headerlink" href="#extracting-metadata" title="Permalink to this heading">¶</a></h2>
<p>A number of <code class="docutils literal notranslate"><span class="pre">BIDSLayout</span></code> methods extract metadata associated with files.</p>
<p>For example, if we want event (task timing) information for a given fMRI scan, we can use <code class="docutils literal notranslate"><span class="pre">get_events</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s1">&#39;nback&#39;</span><span class="p">,</span> <span class="n">run</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;nii.gz&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_events</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>We can also extract metadata from the json files associated with a scan file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s1">&#39;nback&#39;</span><span class="p">,</span> <span class="n">run</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;nii.gz&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filename</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a more detailed set of examples, please refer to the  Tutorial: <a class="reference internal" href="../examples/pybids_tutorial.html"><span class="doc">Introduction to pybids</span></a></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../introduction.html" class="btn btn-neutral float-left" title="1. Introduction: What is pybids?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../analysis/index.html" class="btn btn-neutral float-right" title="3. analysis: Model specification for BIDS datasets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2023, Developers of PyBIDS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>